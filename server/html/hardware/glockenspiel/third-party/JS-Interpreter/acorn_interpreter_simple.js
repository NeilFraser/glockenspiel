/*

 Copyright 2012 Marijn Haverbeke
 SPDX-License-Identifier: MIT
*/
(function(b,a){if(typeof exports==="object"&&typeof module==="object")return a(exports);if(typeof define==="function"&&define.amd)return define(["exports"],a);a(b.acorn||(b.acorn={}))})(typeof globalThis==="undefined"?this||window:globalThis,function(b){function a(f,g){var k=q;for(var n=1,r=0;;){ma.lastIndex=r;var D=ma.exec(k);if(D&&D.index<f)++n,r=D.index+D[0].length;else break}k={line:n,column:f-r};g+=" ("+k.line+":"+k.column+")";g=new SyntaxError(g);g.pos=f;g.loc=k;g.raisedAt=l;throw g;}function c(f){f=
f.split(" ");for(var g=Object.create(null),k=0;k<f.length;k++)g[f[k]]=!0;return function(n){return g[n]||!1}}function d(){this.line=T;this.column=l-L}function e(f,g){W=l;v.locations&&(xa=new d);t=f;m();I=g;ca=f.beforeExpr}function h(){for(var f=l,g=v.onComment&&v.locations&&new d,k=q.charCodeAt(l+=2);l<X&&k!==10&&k!==13&&k!==8232&&k!==8233;)++l,k=q.charCodeAt(l);if(v.onComment)v.onComment(!1,q.slice(f+2,l),f,l,g,v.locations&&new d)}function m(){for(;l<X;){var f=q.charCodeAt(l);if(f===32)++l;else if(f===
13)++l,f=q.charCodeAt(l),f===10&&++l,v.locations&&(++T,L=l);else if(f===10||f===8232||f===8233)++l,v.locations&&(++T,L=l);else if(f>8&&f<14)++l;else if(f===47)if(f=q.charCodeAt(l+1),f===42){f=void 0;var g=v.onComment&&v.locations&&new d,k=l,n=q.indexOf("*/",l+=2);n===-1&&a(l-2,"Unterminated comment");l=n+2;if(v.locations)for(ma.lastIndex=k;(f=ma.exec(q))&&f.index<l;)++T,L=f.index+f[0].length;if(v.onComment)v.onComment(!0,q.slice(k+2,n),k,l,g,v.locations&&new d)}else if(f===47)h();else break;else if(f===
160)++l;else if(f>=5760&&Fb.test(String.fromCharCode(f)))++l;else break}}function p(f){switch(f){case 46:f=q.charCodeAt(l+1);f>=48&&f<=57?Va(!0):(++l,e(Wa));return;case 40:return++l,e(M);case 41:return++l,e(K);case 59:return++l,e(N);case 44:return++l,e(Q);case 91:return++l,e(ya);case 93:return++l,e(za);case 123:return++l,e(da);case 125:return++l,e(Y);case 58:return++l,e(ea);case 63:return++l,e(Xa);case 48:if(f=q.charCodeAt(l+1),f===120||f===88){l+=2;f=fa(16);f===null&&a(C+2,"Expected hexadecimal number");
na(q.charCodeAt(l))&&a(l,"Identifier directly after number");e(ha,f);return}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Va(!1);case 34:case 39:a:{l++;for(var g="";;){l>=X&&a(C,"Unterminated string constant");var k=q.charCodeAt(l);if(k===f){++l;e(oa,g);f=void 0;break a}if(k===92){k=q.charCodeAt(++l);var n=/^[0-7]+/.exec(q.slice(l,l+3));for(n&&(n=n[0]);n&&parseInt(n,8)>255;)n=n.slice(0,-1);n==="0"&&(n=null);++l;if(n)H&&a(l-2,"Octal literal in strict mode"),g+=String.fromCharCode(parseInt(n,
8)),l+=n.length-1;else switch(k){case 110:g+="\n";break;case 114:g+="\r";break;case 120:g+=String.fromCharCode(pa(2));break;case 117:g+=String.fromCharCode(pa(4));break;case 85:g+=String.fromCharCode(pa(8));break;case 116:g+="\t";break;case 98:g+="\b";break;case 118:g+="\v";break;case 102:g+="\f";break;case 48:g+="\x00";break;case 13:q.charCodeAt(l)===10&&++l;case 10:v.locations&&(L=l,++T);break;default:g+=String.fromCharCode(k)}}else k!==13&&k!==10&&k!==8232&&k!==8233||a(C,"Unterminated string constant"),
g+=String.fromCharCode(k),++l}f=void 0}return f;case 47:f=q.charCodeAt(l+1);ca?(++l,qa()):f===61?x(U,2):x(Ya,1);return;case 37:case 42:q.charCodeAt(l+1)===61?x(U,2):x(Gb,1);return;case 124:case 38:g=q.charCodeAt(l+1);g===f?x(f===124?Za:$a,2):g===61?x(U,2):x(f===124?Hb:Ib,1);return;case 94:q.charCodeAt(l+1)===61?x(U,2):x(Jb,1);return;case 43:case 45:a:{g=q.charCodeAt(l+1);if(g===f){if(g===45&&q.charCodeAt(l+2)===62&&ra.test(q.slice(R,l))){l+=3;h();m();y();f=void 0;break a}x(Kb,2)}else g===61?x(U,2):
x(Lb,1);f=void 0}return f;case 60:case 62:g=q.charCodeAt(l+1);k=1;g===f?(k=f===62&&q.charCodeAt(l+2)===62?3:2,q.charCodeAt(l+k)===61?x(U,k+1):x(Mb,k)):g===33&&f===60&&q.charCodeAt(l+2)===45&&q.charCodeAt(l+3)===45?(l+=4,h(),m(),y()):(g===61&&(k=q.charCodeAt(l+2)===61?3:2),x(Nb,k));return;case 61:case 33:q.charCodeAt(l+1)===61?x(Ob,q.charCodeAt(l+2)===61?3:2):x(f===61?ab:bb,1);return;case 126:return x(bb,1)}return!1}function y(f){f?l=C+1:C=l;v.locations&&(Aa=new d);if(f)return qa();if(l>=X)return e(Ba);
f=q.charCodeAt(l);if(na(f)||f===92)return cb();if(p(f)===!1){f=String.fromCharCode(f);if(f==="\\"||db.test(f))return cb();a(l,"Unexpected character '"+f+"'")}}function x(f,g){var k=q.slice(l,l+g);l+=g;e(f,k)}function qa(){for(var f,g,k=l;;){l>=X&&a(k,"Unterminated regexp");var n=q.charAt(l);ra.test(n)&&a(k,"Unterminated regexp");if(f)f=!1;else{if(n==="[")g=!0;else if(n==="]"&&g)g=!1;else if(n==="/"&&!g)break;f=n==="\\"}++l}f=q.slice(k,l);++l;(g=eb())&&!/^[gmi]*$/.test(g)&&a(k,"Invalid regexp flag");
try{var r=new RegExp(f,g)}catch(D){throw D instanceof SyntaxError&&a(k,D.message),D;}e(fb,r)}function fa(f,g){for(var k=l,n=0,r=g===void 0?Infinity:g,D=0;D<r;++D){var G=q.charCodeAt(l);G=G>=97?G-97+10:G>=65?G-65+10:G>=48&&G<=57?G-48:Infinity;if(G>=f)break;++l;n=n*f+G}return l===k||g!==void 0&&l-k!==g?null:n}function Va(f){var g=l,k=!1,n=q.charCodeAt(l)===48;f||fa(10)!==null||a(g,"Invalid number");q.charCodeAt(l)===46&&(++l,fa(10),k=!0);f=q.charCodeAt(l);if(f===69||f===101)f=q.charCodeAt(++l),f!==
43&&f!==45||++l,fa(10)===null&&a(g,"Invalid number"),k=!0;na(q.charCodeAt(l))&&a(l,"Identifier directly after number");f=q.slice(g,l);var r;k?r=parseFloat(f):n&&f.length!==1?/[89]/.test(f)||H?a(g,"Invalid number"):r=parseInt(f,8):r=parseInt(f,10);e(ha,r)}function pa(f){f=fa(16,f);f===null&&a(C,"Bad character escape sequence");return f}function eb(){Z=!1;for(var f,g=!0,k=l;;){var n=q.charCodeAt(l);if(gb(n))Z&&(f+=q.charAt(l)),++l;else if(n===92){Z||(f=q.slice(k,l));Z=!0;q.charCodeAt(++l)!==117&&a(l,
"Expecting Unicode escape sequence \\uXXXX");++l;n=pa(4);var r=String.fromCharCode(n);r||a(l-1,"Invalid Unicode escape");(g?na(n):gb(n))||a(l-4,"Invalid Unicode escape");f+=r}else break;g=!1}return Z?f:q.slice(k,l)}function cb(){var f=eb(),g=aa;!Z&&Pb(f)&&(g=Qb[f]);e(g,f)}function w(){Ca=C;R=W;Da=xa;y()}function Ea(f){H=f;l=C;if(v.locations)for(;l<L;)L=q.lastIndexOf("\n",L-2)+1,--T;m();y()}function hb(){this.type=null;this.start=C;this.end=null}function ib(){this.start=Aa;this.end=null;Fa&&(this.source=
Fa)}function E(){var f=new hb;v.locations&&(f.loc=new ib);v.directSourceFile&&(f.sourceFile=v.directSourceFile);v.ranges&&(f.range=[C,0]);return f}function S(f){var g=new hb;g.start=f.start;v.locations&&(g.loc=new ib,g.loc.start=f.loc.start);v.ranges&&(g.range=[f.range[0],0]);return g}function u(f,g){f.type=g;f.end=R;v.locations&&(f.loc.end=Da);v.ranges&&(f.range[1]=R);return f}function Ga(f){return f.type==="ExpressionStatement"&&f.expression.type==="Literal"&&f.expression.value==="use strict"}function z(f){return t===
f?(w(),!0):!1}function sa(){return!v.strictSemicolons&&(t===Ba||t===Y||ra.test(q.slice(R,C)))}function V(){z(N)||sa()||O()}function A(f){t===f?w():O()}function O(){a(C,"Unexpected token")}function ta(f){f.type!=="Identifier"&&f.type!=="MemberExpression"&&a(f.start,"Assigning to rvalue");H&&f.type==="Identifier"&&ua(f.name)&&a(f.start,"Assigning to "+f.name+" in strict mode")}function J(){(t===Ya||t===U&&I==="/=")&&y(!0);var f=t,g=E();switch(f){case Ha:case jb:w();var k=f===Ha;z(N)||sa()?g.label=null:
t!==aa?O():(g.label=P(),V());for(var n=0;n<B.length;++n){var r=B[n];if(g.label===null||r.name===g.label.name){if(r.kind!==null&&(k||r.kind==="loop"))break;if(g.label&&k)break}}n===B.length&&a(g.start,"Unsyntactic "+f.keyword);return u(g,k?"BreakStatement":"ContinueStatement");case kb:return w(),V(),u(g,"DebuggerStatement");case lb:return w(),B.push(Ia),g.body=J(),B.pop(),A(Ja),g.test=ia(),V(),u(g,"DoWhileStatement");case mb:w();B.push(Ia);A(M);if(t===N)return Ka(g,null);if(t===La)return f=E(),w(),
nb(f,!0),u(f,"VariableDeclaration"),f.declarations.length===1&&z(va)?ob(g,f):Ka(g,f);f=F(!1,!0);return z(va)?(ta(f),ob(g,f)):Ka(g,f);case Ma:return w(),Na(g,!0);case pb:return w(),g.test=ia(),g.consequent=J(),g.alternate=z(qb)?J():null,u(g,"IfStatement");case rb:return ja||v.allowReturnOutsideFunction||a(C,"'return' outside of function"),w(),z(N)||sa()?g.argument=null:(g.argument=F(),V()),u(g,"ReturnStatement");case Oa:w();g.discriminant=ia();g.cases=[];A(da);for(B.push(Rb);t!==Y;)t===Pa||t===sb?
(f=t===Pa,n&&u(n,"SwitchCase"),g.cases.push(n=E()),n.consequent=[],w(),f?n.test=F():(k&&a(Ca,"Multiple default clauses"),k=!0,n.test=null),A(ea)):(n||O(),n.consequent.push(J()));n&&u(n,"SwitchCase");w();B.pop();return u(g,"SwitchStatement");case tb:return w(),ra.test(q.slice(R,C))&&a(R,"Illegal newline after throw"),g.argument=F(),V(),u(g,"ThrowStatement");case ub:return w(),g.block=ka(),g.handler=null,t===vb&&(f=E(),w(),A(M),f.param=P(),H&&ua(f.param.name)&&a(f.param.start,"Binding "+f.param.name+
" in strict mode"),A(K),f.body=ka(),g.handler=u(f,"CatchClause")),g.finalizer=z(wb)?ka():null,g.handler||g.finalizer||a(g.start,"Missing catch or finally clause"),u(g,"TryStatement");case La:return w(),nb(g),V(),u(g,"VariableDeclaration");case Ja:return w(),g.test=ia(),B.push(Ia),g.body=J(),B.pop(),u(g,"WhileStatement");case xb:return H&&a(C,"'with' in strict mode"),w(),g.object=ia(),g.body=J(),u(g,"WithStatement");case da:return ka();case N:return w(),u(g,"EmptyStatement");default:k=I;r=F();if(f===
aa&&r.type==="Identifier"&&z(ea)){for(n=0;n<B.length;++n)B[n].name===k&&a(r.start,"Label '"+k+"' is already declared");B.push({name:k,kind:t.isLoop?"loop":t===Oa?"switch":null});g.body=J();B.pop();g.label=r;return u(g,"LabeledStatement")}g.expression=r;V();return u(g,"ExpressionStatement")}}function ia(){A(M);var f=F();A(K);return f}function ka(f){var g=E(),k=!0,n=!1;g.body=[];for(A(da);!z(Y);){var r=J();g.body.push(r);if(k&&f&&Ga(r)){var D=n;Ea(n=!0)}k=!1}n&&!D&&Ea(!1);return u(g,"BlockStatement")}
function Ka(f,g){f.init=g;A(N);f.test=t===N?null:F();A(N);f.update=t===K?null:F();A(K);f.body=J();B.pop();return u(f,"ForStatement")}function ob(f,g){f.left=g;f.right=F();A(K);f.body=J();B.pop();return u(f,"ForInStatement")}function nb(f,g){f.declarations=[];for(f.kind="var";;){var k=E();k.id=P();H&&ua(k.id.name)&&a(k.id.start,"Binding "+k.id.name+" in strict mode");k.init=z(ab)?F(!0,g):null;f.declarations.push(u(k,"VariableDeclarator"));if(!z(Q))break}}function F(f,g){var k=Qa(g);if(!f&&t===Q){f=
S(k);for(f.expressions=[k];z(Q);)f.expressions.push(Qa(g));return u(f,"SequenceExpression")}return k}function Qa(f){var g=Ra(Sa(),-1,f);if(z(Xa)){var k=S(g);k.test=g;k.consequent=F(!0);A(ea);k.alternate=F(!0,f);g=u(k,"ConditionalExpression")}return t.isAssign?(k=S(g),k.operator=I,k.left=g,w(),k.right=Qa(f),ta(g),u(k,"AssignmentExpression")):g}function Ra(f,g,k){var n=t.binop;if(n!==null&&(!k||t!==va)&&n>g){var r=S(f);r.left=f;r.operator=I;f=t;w();r.right=Ra(Sa(),n,k);n=u(r,f===Za||f===$a?"LogicalExpression":
"BinaryExpression");return Ra(n,g,k)}return f}function Sa(){if(t.prefix){var f=E(),g=t.isUpdate;f.operator=I;ca=f.prefix=!0;w();f.argument=Sa();g?ta(f.argument):H&&f.operator==="delete"&&f.argument.type==="Identifier"&&a(f.start,"Deleting local variable in strict mode");return u(f,g?"UpdateExpression":"UnaryExpression")}for(g=la(wa());t.postfix&&!sa();)f=S(g),f.operator=I,f.prefix=!1,f.argument=g,ta(g),w(),g=u(f,"UpdateExpression");return g}function la(f,g){if(z(Wa)){var k=S(f);k.object=f;k.property=
P(!0);k.computed=!1;return la(u(k,"MemberExpression"),g)}return z(ya)?(k=S(f),k.object=f,k.property=F(),k.computed=!0,A(za),la(u(k,"MemberExpression"),g)):!g&&z(M)?(k=S(f),k.callee=f,k.arguments=Ta(K,!1),la(u(k,"CallExpression"),g)):f}function wa(){switch(t){case yb:var f=E();w();return u(f,"ThisExpression");case aa:return P();case ha:case oa:case fb:return f=E(),f.value=I,f.raw=q.slice(C,W),w(),u(f,"Literal");case zb:case Ab:case Bb:return f=E(),f.value=t.atomValue,f.raw=t.keyword,w(),u(f,"Literal");
case M:f=Aa;var g=C;w();var k=F();k.start=g;k.end=W;v.locations&&(k.loc.start=f,k.loc.end=xa);v.ranges&&(k.range=[g,W]);A(K);return k;case ya:return f=E(),w(),f.elements=Ta(za,!0,!0),u(f,"ArrayExpression");case da:f=E();g=!0;k=!1;f.properties=[];for(w();!z(Y);){if(g)g=!1;else if(A(Q),v.allowTrailingCommas&&z(Y))break;var n={key:t===ha||t===oa?wa():P(!0)},r=!1;if(z(ea)){n.value=F(!0);var D=n.kind="init"}else n.key.type!=="Identifier"||n.key.name!=="get"&&n.key.name!=="set"?O():(r=k=!0,D=n.kind=n.key.name,
n.key=t===ha||t===oa?wa():P(!0),t!==M&&O(),n.value=Na(E(),!1));if(n.key.type==="Identifier"&&(H||k))for(var G=0;G<f.properties.length;++G){var ba=f.properties[G];if(ba.key.name===n.key.name){var Ua=D===ba.kind||r&&ba.kind==="init"||D==="init"&&(ba.kind==="get"||ba.kind==="set");Ua&&!H&&D==="init"&&ba.kind==="init"&&(Ua=!1);Ua&&a(n.key.start,"Redefinition of property")}}f.properties.push(n)}return u(f,"ObjectExpression");case Ma:return f=E(),w(),Na(f,!1);case Cb:return f=E(),w(),f.callee=la(wa(),!0),
f.arguments=z(M)?Ta(K,!1):Sb,u(f,"NewExpression")}O()}function Na(f,g){t===aa?f.id=P():g?O():f.id=null;f.params=[];var k=!0;for(A(M);!z(K);)k?k=!1:A(Q),f.params.push(P());k=ja;var n=B;ja=!0;B=[];f.body=ka(!0);ja=k;B=n;if(H||f.body.body.length&&Ga(f.body.body[0]))for(k=f.id?-1:0;k<f.params.length;++k)if(n=k<0?f.id:f.params[k],(Db(n.name)||ua(n.name))&&a(n.start,"Defining '"+n.name+"' in strict mode"),k>=0)for(var r=0;r<k;++r)n.name===f.params[r].name&&a(n.start,"Argument name clash in strict mode");
return u(f,g?"FunctionDeclaration":"FunctionExpression")}function Ta(f,g,k){for(var n=[],r=!0;!z(f);){if(r)r=!1;else if(A(Q),g&&v.allowTrailingCommas&&z(f))break;n.push(k&&t===Q?null:F(!0))}return n}function P(f){var g=E();f&&v.forbidReserved==="everywhere"&&(f=!1);t===aa?(!f&&(v.forbidReserved&&Tb(I)||H&&Db(I))&&q.slice(C,W).indexOf("\\")===-1&&a(C,"The keyword '"+I+"' is reserved"),g.name=I):f&&t.keyword?g.name=t.keyword:O();ca=!1;w();return u(g,"Identifier")}b.version="0.5.0";var v,q="",X,Fa;b.parse=
function(f,g){q=String(f);X=q.length;v=g||{};for(var k in Eb)Object.prototype.hasOwnProperty.call(v,k)||(v[k]=Eb[k]);Fa=v.sourceFile;T=1;l=L=0;ca=!0;m();k=v.program;Ca=R=l;v.locations&&(Da=new d);ja=H=!1;B=[];y();f=k||E();g=!0;k||(f.body=[]);for(;t!==Ba;)k=J(),f.body.push(k),g&&Ga(k)&&Ea(!0),g=!1;return u(f,"Program")};var Eb={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},
l=0,C=0,W=0,Aa,xa,t,I,ca,T,L,Ca=0,R=0,Da,ja,B,H,Sb=[],ha={type:"num"},fb={type:"regexp"},oa={type:"string"},aa={type:"name"},Ba={type:"eof"},Ha={keyword:"break"},Pa={keyword:"case",beforeExpr:!0},vb={keyword:"catch"},jb={keyword:"continue"},kb={keyword:"debugger"},sb={keyword:"default"},lb={keyword:"do",isLoop:!0},qb={keyword:"else",beforeExpr:!0},wb={keyword:"finally"},mb={keyword:"for",isLoop:!0},Ma={keyword:"function"},pb={keyword:"if"},rb={keyword:"return",beforeExpr:!0},Oa={keyword:"switch"},
tb={keyword:"throw",beforeExpr:!0},ub={keyword:"try"},La={keyword:"var"},Ja={keyword:"while",isLoop:!0},xb={keyword:"with"},Cb={keyword:"new",beforeExpr:!0},yb={keyword:"this"},zb={keyword:"null",atomValue:null},Ab={keyword:"true",atomValue:!0},Bb={keyword:"false",atomValue:!1},va={keyword:"in",binop:7,beforeExpr:!0},Qb={"break":Ha,"case":Pa,"catch":vb,"continue":jb,"debugger":kb,"default":sb,"do":lb,"else":qb,"finally":wb,"for":mb,"function":Ma,"if":pb,"return":rb,"switch":Oa,"throw":tb,"try":ub,
"var":La,"while":Ja,"with":xb,"null":zb,"true":Ab,"false":Bb,"new":Cb,"in":va,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":yb,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},ya={type:"[",beforeExpr:!0},za={type:"]"},da={type:"{",beforeExpr:!0},Y={type:"}"},M={type:"(",beforeExpr:!0},K={type:")"},Q={type:",",beforeExpr:!0},N={type:";",beforeExpr:!0},ea={type:":",beforeExpr:!0},
Wa={type:"."},Xa={type:"?",beforeExpr:!0},Ya={binop:10,beforeExpr:!0},ab={isAssign:!0,beforeExpr:!0},U={isAssign:!0,beforeExpr:!0},Kb={postfix:!0,prefix:!0,isUpdate:!0},bb={prefix:!0,beforeExpr:!0},Za={binop:1,beforeExpr:!0},$a={binop:2,beforeExpr:!0},Hb={binop:3,beforeExpr:!0},Jb={binop:4,beforeExpr:!0},Ib={binop:5,beforeExpr:!0},Ob={binop:6,beforeExpr:!0},Nb={binop:7,beforeExpr:!0},Mb={binop:8,beforeExpr:!0},Lb={binop:9,prefix:!0,beforeExpr:!0},Gb={binop:10,beforeExpr:!0},Tb=c("class enum extends super const export import"),
Db=c("implements interface let package private protected public static yield"),ua=c("eval arguments"),Pb=c("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Fb=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,db=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
Ub=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),
ra=/[\n\r\u2028\u2029]/,ma=/\r\n|[\n\r\u2028\u2029]/g,na=function(f){return f<65?f===36:f<91?!0:f<97?f===95:f<123?!0:f>=170&&db.test(String.fromCharCode(f))},gb=function(f){return f<48?f===36:f<58?!0:f<65?!1:f<91?!0:f<97?f===95:f<123?!0:f>=170&&Ub.test(String.fromCharCode(f))},Z,Ia={kind:"loop"},Rb={kind:"switch"}});/*

 Copyright 2013 Neil Fraser
 SPDX-License-Identifier: Apache-2.0
*/
var Interpreter=function(b,a){typeof b==="string"&&(b=this.parse_(b,"code"));var c=b.constructor;this.newNode=function(){return new c({options:{}})};var d=this.newNode(),e;for(e in b)d[e]=e==="body"?b[e].slice():b[e];this.ast=d;this.tasks=[];this.initFunc_=a;this.paused_=!1;this.polyfills_=[];this.functionCounter_=0;this.stepFunctions_=Object.create(null);b=/^step([A-Z]\w*)$/;var h,m;for(m in this)typeof this[m]==="function"&&(h=m.match(b))&&(this.stepFunctions_[h[1]]=this[m].bind(this));this.globalScope=
this.createScope(this.ast,null);this.globalObject=this.globalScope.object;this.ast=this.parse_(this.polyfills_.join("\n"),"polyfills");this.polyfills_=void 0;Interpreter.stripLocations_(this.ast,void 0,void 0);h=new Interpreter.State(this.ast,this.globalScope);h.done=!1;this.stateStack=[h];this.run();this.value=void 0;this.ast=d;h=new Interpreter.State(this.ast,this.globalScope);h.done=!1;this.stateStack.length=0;this.stateStack[0]=h};Interpreter.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4};
Interpreter.Status={DONE:0,STEP:1,TASK:2,ASYNC:3};Interpreter.PARSE_OPTIONS={locations:!0,ecmaVersion:5};Interpreter.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1};Interpreter.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0};Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1};Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1};
Interpreter.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0};Interpreter.STEP_ERROR={STEP_ERROR:!0};Interpreter.SCOPE_REFERENCE={SCOPE_REFERENCE:!0};Interpreter.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0};Interpreter.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0};Interpreter.toStringCycles_=[];Interpreter.vm=null;Interpreter.currentInterpreter_=null;Interpreter.nativeGlobal=typeof globalThis==="undefined"?this||window:globalThis;
Interpreter.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;",
"default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"];Interpreter.legalArrayLength=function(b){var a=b>>>0;return a===Number(b)?a:NaN};Interpreter.legalArrayIndex=function(b){var a=b>>>0;return String(a)===String(b)&&a!==4294967295?a:NaN};
Interpreter.stripLocations_=function(b,a,c){a?b.start=a:delete b.start;c?b.end=c:delete b.end;for(var d in b)if(b[d]!==b.loc&&b.hasOwnProperty(d)){var e=b[d];e&&typeof e==="object"&&Interpreter.stripLocations_(e,a,c)}};Interpreter.prototype.REGEXP_MODE=2;Interpreter.prototype.REGEXP_THREAD_TIMEOUT=1E3;Interpreter.prototype.POLYFILL_TIMEOUT=1E3;Interpreter.prototype.getterStep_=!1;Interpreter.prototype.setterStep_=!1;Interpreter.prototype.appendCodeNumber_=0;Interpreter.prototype.taskCodeNumber_=0;
Interpreter.prototype.parse_=function(b,a){var c={},d;for(d in Interpreter.PARSE_OPTIONS)c[d]=Interpreter.PARSE_OPTIONS[d];c.sourceFile=a;return Interpreter.nativeGlobal.acorn.parse(b,c)};
Interpreter.prototype.appendCode=function(b){var a=this.stateStack[0];if(!a||a.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");typeof b==="string"&&(b=this.parse_(b,"appendCode"+this.appendCodeNumber_++));if(!b||b.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(b,a.scope);Array.prototype.push.apply(a.node.body,b.body);a.node.body.variableCache_=null;a.done=!1};
Interpreter.prototype.step=function(){var b=this.stateStack,a;do{var c=b[b.length-1];if(this.paused_)break;else if(!c||c.node.type==="Program"&&c.done){if(!this.tasks.length)return!1;c=this.nextTask_();if(!c)break}var d=c.node,e=Interpreter.currentInterpreter_;Interpreter.currentInterpreter_=this;try{var h=this.stepFunctions_[d.type](b,c,d)}catch(m){if(m!==Interpreter.STEP_ERROR)throw this.value!==m&&(this.value=void 0),m;}finally{Interpreter.currentInterpreter_=e}h&&b.push(h);if(this.getterStep_)throw this.value=
void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");a||d.end||(a=Date.now()+this.POLYFILL_TIMEOUT)}while(!d.end&&a>Date.now());return!0};Interpreter.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_};
Interpreter.prototype.getStatus=function(){if(this.paused_)return Interpreter.Status.ASYNC;var b=this.stateStack;return!(b=b[b.length-1])||b.node.type==="Program"&&b.done?(b=this.tasks[0])?b.time>Date.now()?Interpreter.Status.TASK:Interpreter.Status.STEP:Interpreter.Status.DONE:Interpreter.Status.STEP};
Interpreter.prototype.initGlobal=function(b){this.setProperty(b,"NaN",NaN,Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"Infinity",Infinity,Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"undefined",void 0,Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"window",b,Interpreter.READONLY_DESCRIPTOR);this.setProperty(b,"this",b,Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,
"self",b);this.OBJECT_PROTO=new Interpreter.Object(null);this.FUNCTION_PROTO=new Interpreter.Object(this.OBJECT_PROTO);this.initFunction(b);this.initObject(b);b.proto=this.OBJECT_PROTO;this.setProperty(b,"constructor",this.OBJECT,Interpreter.NONENUMERABLE_DESCRIPTOR);this.initArray(b);this.initString(b);this.initBoolean(b);this.initNumber(b);this.initDate(b);this.initRegExp(b);this.initError(b);this.initMath(b);this.initJSON(b);var a=this;var c=this.createNativeFunction(function(h){throw EvalError("Can't happen");
},!1);c.eval=!0;this.setProperty(b,"eval",c,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"parseInt",this.createNativeFunction(parseInt,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"parseFloat",this.createNativeFunction(parseFloat,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"isNaN",this.createNativeFunction(isNaN,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"isFinite",this.createNativeFunction(isFinite,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);
for(var d=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],e=0;e<d.length;e++)c=function(h){return function(m){try{return h(m)}catch(p){a.throwException(a.URI_ERROR,p.message)}}}(d[e][0]),this.setProperty(b,d[e][1],this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(h){return a.createTask_(!1,arguments)};this.setProperty(b,"setTimeout",this.createNativeFunction(c,
!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(h){return a.createTask_(!0,arguments)};this.setProperty(b,"setInterval",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(h){a.deleteTask_(h)};this.setProperty(b,"clearTimeout",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(h){a.deleteTask_(h)};this.setProperty(b,"clearInterval",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.OBJECT=this.OBJECT;this.OBJECT_PROTO=
this.OBJECT_PROTO;this.FUNCTION=this.FUNCTION;this.FUNCTION_PROTO=this.FUNCTION_PROTO;this.ARRAY=this.ARRAY;this.ARRAY_PROTO=this.ARRAY_PROTO;this.REGEXP=this.REGEXP;this.REGEXP_PROTO=this.REGEXP_PROTO;this.DATE=this.DATE;this.DATE_PROTO=this.DATE_PROTO;this.initFunc_&&this.initFunc_(this,b)};Interpreter.prototype.functionCodeNumber_=0;
Interpreter.prototype.initFunction=function(b){var a=this,c=/^[A-Za-z_$][\w$]*$/;var d=function(e){var h=arguments.length?String(arguments[arguments.length-1]):"",m=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(m){m=m.split(/\s*,\s*/);for(var p=0;p<m.length;p++){var y=m[p];c.test(y)||a.throwException(a.SYNTAX_ERROR,"Invalid function argument: "+y)}m=m.join(", ")}try{var x=a.parse_("(function("+m+") {"+h+"})","function"+a.functionCodeNumber_++)}catch(qa){a.throwException(a.SYNTAX_ERROR,
"Invalid code: "+qa.message)}x.body.length!==1&&a.throwException(a.SYNTAX_ERROR,"Invalid code in function body");return a.createFunction(x.body[0].expression,a.globalScope,"anonymous")};this.FUNCTION=this.createNativeFunction(d,!0);this.setProperty(b,"Function",this.FUNCTION,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,Interpreter.NONENUMERABLE_DESCRIPTOR);
this.FUNCTION_PROTO.nativeFunc=function(){};this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++;this.FUNCTION_PROTO.illegalConstructor=!0;this.setProperty(this.FUNCTION_PROTO,"length",0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.FUNCTION_PROTO.class="Function";d=function(e,h,m){var p=a.stateStack[a.stateStack.length-1];p.func_=e;p.funcThis_=h;p.arguments_=[];m!==null&&m!==void 0&&(m instanceof Interpreter.Object?p.arguments_=Array.from(m.properties):a.throwException(a.TYPE_ERROR,"CreateListFromArrayLike called on non-object"));
p.doneExec_=!1};this.setNativeFunctionPrototype(this.FUNCTION,"apply",d);this.polyfills_.push("(function(){var d=Function.prototype.apply;Function.prototype.apply=function(e,b){for(var c=[],a=0;b&&a<b.length;a++)c[a]=b[a];return d(this,e,c)}})();");d=function(e){var h=a.stateStack[a.stateStack.length-1];h.func_=this;h.funcThis_=e;h.arguments_=[];for(var m=1;m<arguments.length;m++)h.arguments_.push(arguments[m]);h.doneExec_=!1};this.setNativeFunctionPrototype(this.FUNCTION,"call",d);this.polyfills_.push('Object.defineProperty(Function.prototype,"bind",{configurable:!0,writable:!0,value:function(c){if(typeof this!=="function")throw TypeError("What is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),e=this,a=function(){},b=function(){return e.apply(this instanceof a?this:c,d.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(a.prototype=this.prototype);b.prototype=new a;return b}});');
d=function(){return String(this)};this.setNativeFunctionPrototype(this.FUNCTION,"toString",d);this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(d,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);d=function(){return this.valueOf()};this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",d);this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(d,!1),Interpreter.NONENUMERABLE_DESCRIPTOR)};
Interpreter.prototype.initObject=function(b){var a=this;var c=function(e){if(e===void 0||e===null)return a.calledWithNew()?this:a.createObjectProto(a.OBJECT_PROTO);if(!(e instanceof Interpreter.Object)){var h=a.createObjectProto(a.getPrototype(e));h.data=e;return h}return e};this.OBJECT=this.createNativeFunction(c,!0);this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,Interpreter.NONENUMERABLE_DESCRIPTOR);
this.setProperty(b,"Object",this.OBJECT,Interpreter.NONENUMERABLE_DESCRIPTOR);var d=function(e){e!==void 0&&e!==null||a.throwException(a.TYPE_ERROR,"Cannot convert '"+e+"' to object")};c=function(e){d(e);return a.nativeToPseudo(Object.getOwnPropertyNames(e instanceof Interpreter.Object?e.properties:e))};this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(e){d(e);e instanceof Interpreter.Object&&(e=e.properties);return a.nativeToPseudo(Object.keys(e))};
this.setProperty(this.OBJECT,"keys",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(e){if(e===null)return a.createObjectProto(null);e instanceof Interpreter.Object||a.throwException(a.TYPE_ERROR,"Object prototype may only be an Object or null, not "+e);return a.createObjectProto(e)};this.setProperty(this.OBJECT,"create",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.polyfills_.push("(function(){var c=Object.create;Object.create=function(a,b){a=c(a);b&&Object.defineProperties(a,b);return a}})();");
c=function(e,h,m){h=String(h);e instanceof Interpreter.Object||a.throwException(a.TYPE_ERROR,"Object.defineProperty called on non-object: "+e);m instanceof Interpreter.Object||a.throwException(a.TYPE_ERROR,"Property description must be an object");!e.preventExtensions||h in e.properties||a.throwException(a.TYPE_ERROR,"Can't define property '"+h+"', object is not extensible");a.setProperty(e,h,Interpreter.VALUE_IN_DESCRIPTOR,m.properties);return e};this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(c,
!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.polyfills_.push('(function(){var d=Object.defineProperty;Object.defineProperty=function(e,c,a){var b={};"configurable"in a&&(b.configurable=a.configurable);"enumerable"in a&&(b.enumerable=a.enumerable);"writable"in a&&(b.writable=a.writable);"value"in a&&(b.value=a.value);"get"in a&&(b.get=a.get);"set"in a&&(b.set=a.set);return d(e,c,b)}})();\nObject.defineProperty(Object,"defineProperties",{configurable:!0,writable:!0,value:function(d,e){for(var c=Object.keys(e),a=0;a<c.length;a++)Object.defineProperty(d,c[a],e[c[a]]);return d}});');
c=function(e,h){e instanceof Interpreter.Object||a.throwException(a.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+e);h=String(h);if(h in e.properties){var m=Object.getOwnPropertyDescriptor(e.properties,h),p=e.getter[h];e=e.setter[h];h=a.createObjectProto(a.OBJECT_PROTO);p||e?(a.setProperty(h,"get",p),a.setProperty(h,"set",e)):(a.setProperty(h,"value",m.value),a.setProperty(h,"writable",m.writable));a.setProperty(h,"configurable",m.configurable);a.setProperty(h,"enumerable",m.enumerable);
return h}};this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(e){d(e);return a.getPrototype(e)};this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(e){return!!e&&!e.preventExtensions};this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(e){e instanceof Interpreter.Object&&
(e.preventExtensions=!0);return e};this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setNativeFunctionPrototype(this.OBJECT,"toString",Interpreter.Object.prototype.toString);this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",Interpreter.Object.prototype.toString);this.setNativeFunctionPrototype(this.OBJECT,"valueOf",Interpreter.Object.prototype.valueOf);c=function(e){d(this);return this instanceof Interpreter.Object?
String(e)in this.properties:this.hasOwnProperty(e)};this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",c);c=function(e){d(this);return this instanceof Interpreter.Object?Object.prototype.propertyIsEnumerable.call(this.properties,e):this.propertyIsEnumerable(e)};this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",c);c=function(e){for(;;){e=a.getPrototype(e);if(!e)return!1;if(e===this)return!0}};this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",c)};
Interpreter.prototype.initArray=function(b){var a=this;var c=function(d){var e=a.calledWithNew()?this:a.createArray(),h=arguments[0];if(arguments.length===1&&typeof h==="number")isNaN(Interpreter.legalArrayLength(h))&&a.throwException(a.RANGE_ERROR,"Invalid array length: "+h),e.properties.length=h;else{for(h=0;h<arguments.length;h++)e.properties[h]=arguments[h];e.properties.length=h}return e};this.ARRAY=this.createNativeFunction(c,!0);this.ARRAY_PROTO=this.ARRAY.properties.prototype;this.setProperty(b,
"Array",this.ARRAY,Interpreter.NONENUMERABLE_DESCRIPTOR);c=function(d){return d&&d.class==="Array"};this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0});this.ARRAY_PROTO.class="Array";this.polyfills_.push('(function(){function g(c,b){Object.defineProperty(b,"name",{value:c});Object.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:b})}g("pop",function(){if(!this)throw TypeError();var c=Object(this),b=c.length>>>0;if(!b||b<0)c.length=0;else{b--;var d=c[b];delete c[b];c.length=b;return d}});g("push",function(c){if(!this)throw TypeError();for(var b=Object(this),d=b.length>>>0,a=0;a<arguments.length;a++)b[d]=arguments[a],d++;return b.length=d});g("shift",function(){if(!this)throw TypeError();\nvar c=Object(this),b=c.length>>>0;if(!b||b<0)c.length=0;else{for(var d=c[0],a=0;a<b-1;a++)a+1 in c?c[a]=c[a+1]:delete c[a];delete c[a];c.length=b-1;return d}});g("unshift",function(c){if(!this)throw TypeError();var b=Object(this),d=b.length>>>0;if(!d||d<0)d=0;for(var a=d-1;a>=0;a--)a in b?b[a+arguments.length]=b[a]:delete b[a+arguments.length];for(a=0;a<arguments.length;a++)b[a]=arguments[a];return b.length=d+arguments.length});g("reverse",function(){if(!this)throw TypeError();var c=Object(this),\nb=c.length>>>0;if(!b||b<2)return c;for(var d=0;d<b/2-.5;d++){var a=c[d],e=d in c;b-d-1 in c?c[d]=c[b-d-1]:delete c[d];e?c[b-d-1]=a:delete c[b-d-1]}return c});g("indexOf",function(c,b){if(!this)throw TypeError();var d=Object(this),a=d.length>>>0;b|=0;if(!a||b>=a)return-1;for(b=Math.max(b>=0?b:a-Math.abs(b),0);b<a;){if(b in d&&d[b]===c)return b;b++}return-1});g("lastIndexOf",function(c,b){if(!this)throw TypeError();var d=Object(this),a=d.length>>>0;if(!a)return-1;var e=a-1;arguments.length>1&&(e=b|\n0)&&(e=(e>0||-1)*Math.floor(Math.abs(e)));for(a=e>=0?Math.min(e,a-1):a-Math.abs(e);a>=0;){if(a in d&&d[a]===c)return a;a--}return-1});g("slice",function(c,b){if(!this)throw TypeError();var d=Object(this),a=d.length>>>0;c|=0;c=c>=0?c:Math.max(0,a+c);typeof b!=="undefined"?(b!==Infinity&&(b|=0),b=b<0?a+b:Math.min(b,a)):b=a;b-=c;a=Array(b);for(var e=0;e<b;e++)c+e in d&&(a[e]=d[c+e]);return a});g("splice",function(c,b,d){if(!this)throw TypeError();var a=Object(this),e=a.length>>>0;c|=0;c=c<0?Math.max(e+\nc,0):Math.min(c,e);b=arguments.length<2?e-c:Math.max(0,Math.min(b|0,e-c));for(var h=[],f=c;f<c+b;f++)f in a?h.push(a[f]):h.length++,f+b in a?a[f]=a[f+b]:delete a[f];for(f=c+b;f<e-b;f++)f+b in a?a[f]=a[f+b]:delete a[f];for(f=e-b;f<e;f++)delete a[f];e-=b;if(arguments.length>2){var k=arguments.length-2;for(f=e-1;f>=c;f--)f in a?a[f+k]=a[f]:delete a[f+k];e+=k;for(f=2;f<arguments.length;f++)a[c+f-2]=arguments[f]}a.length=e;return h});g("concat",function(c){if(!this)throw TypeError();for(var b=Object(this),\nd=[],a=-1;a<arguments.length;a++){var e=a===-1?b:arguments[a];if(Array.isArray(e))for(var h=0,f=e.length;h<f;h++)h in e?d.push(e[h]):d.length++;else d.push(e)}return d});g("join",function(c){if(!this)throw TypeError();var b=Object(this),d=b.length>>>0;c=typeof c==="undefined"?",":""+c;for(var a="",e=0;e<d;e++)e&&c&&(a+=c),a+=b[e]===null||b[e]===void 0?"":b[e];return a});g("every",function(c,b){if(!this||typeof c!=="function")throw TypeError();var d,a=0,e=Object(this),h=e.length>>>0;for(arguments.length>\n1&&(d=b);a<h;){if(a in e&&!c.call(d,e[a],a,e))return!1;a++}return!0});g("filter",function(c,b){if(!this||typeof c!=="function")throw TypeError();for(var d=Object(this),a=d.length>>>0,e=[],h=arguments.length>=2?arguments[1]:void 0,f=0;f<a;f++)if(f in d){var k=d[f];c.call(h,k,f,d)&&e.push(k)}return e});g("forEach",function(c,b){if(!this||typeof c!=="function")throw TypeError();var d,a=0,e=Object(this),h=e.length>>>0;for(arguments.length>1&&(d=b);a<h;)a in e&&c.call(d,e[a],a,e),a++});g("map",function(c,\nb){if(!this||typeof c!=="function")throw TypeError();var d,a=0,e=Object(this),h=e.length>>>0;arguments.length>1&&(d=b);for(var f=Array(h);a<h;)a in e&&(f[a]=c.call(d,e[a],a,e)),a++;return f});g("reduce",function(c){if(!this||typeof c!=="function")throw TypeError();var b=Object(this),d=b.length>>>0,a=0;if(arguments.length===2)var e=arguments[1];else{for(;a<d&&!(a in b);)a++;if(a>=d)throw TypeError("Reduce of empty array with no initial value");e=b[a++]}for(;a<d;a++)a in b&&(e=c(e,b[a],a,b));return e});\ng("reduceRight",function(c){if(!this||typeof c!=="function")throw TypeError();var b=Object(this),d=(b.length>>>0)-1;if(arguments.length>=2)var a=arguments[1];else{for(;d>=0&&!(d in b);)d--;if(d<0)throw TypeError("Reduce of empty array with no initial value");a=b[d--]}for(;d>=0;d--)d in b&&(a=c(a,b[d],d,b));return a});g("some",function(c){if(!this||typeof c!=="function")throw TypeError();for(var b=Object(this),d=b.length>>>0,a=arguments.length>=2?arguments[1]:void 0,e=0;e<d;e++)if(e in b&&c.call(a,\nb[e],e,b))return!0;return!1});g("sort",function(c){if(!this)throw TypeError();typeof c!=="function"&&(c=void 0);for(var b=0;b<this.length;b++){for(var d=0,a=0;a<this.length-b-1;a++)if(c?c(this[a],this[a+1])>0:String(this[a])>String(this[a+1])){var e=this[a],h=a in this;a+1 in this?this[a]=this[a+1]:delete this[a];h?this[a+1]=e:delete this[a+1];d++}if(!d)break}return this});g("toLocaleString",function(){if(!this)throw TypeError();for(var c=Object(this),b=c.length>>>0,d=[],a=0;a<b;a++)d[a]=c[a]===null||\nc[a]===void 0?"":c[a].toLocaleString();return d.join(",")})})();')};
Interpreter.prototype.initString=function(b){var a=this;var c=function(d){d=arguments.length?Interpreter.nativeGlobal.String(d):"";return a.calledWithNew()?(this.data=d,this):d};this.STRING=this.createNativeFunction(c,!0);this.setProperty(b,"String",this.STRING,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);b="charAt charCodeAt concat indexOf lastIndexOf slice substr substring toLocaleLowerCase toLocaleUpperCase toLowerCase toUpperCase trim".split(" ");
for(c=0;c<b.length;c++)this.setNativeFunctionPrototype(this.STRING,b[c],String.prototype[b[c]]);c=function(d,e,h){e=a.pseudoToNative(e);h=a.pseudoToNative(h);try{return String(this).localeCompare(d,e,h)}catch(m){a.throwException(a.ERROR,"localeCompare: "+m.message)}};this.setNativeFunctionPrototype(this.STRING,"localeCompare",c);c=function(d,e,h){var m=String(this);e=e?Number(e):void 0;if(a.isa(d,a.REGEXP)&&(d=d.data,a.maybeThrowRegExp(d,h),a.REGEXP_MODE===2)){if(Interpreter.vm)d=a.vmCall("string.split(separator, limit)",
{string:m,separator:d,limit:e},d,h),d!==Interpreter.REGEXP_TIMEOUT&&h(a.nativeToPseudo(d));else{var p=a.createWorker(),y=a.regExpTimeout(d,p,h);p.onmessage=function(x){clearTimeout(y);h(a.nativeToPseudo(x.data))};p.postMessage(["split",m,d,e])}return}d=m.split(d,e);h(a.nativeToPseudo(d))};this.setAsyncFunctionPrototype(this.STRING,"split",c);c=function(d,e){var h=String(this);d=a.isa(d,a.REGEXP)?d.data:new RegExp(d);a.maybeThrowRegExp(d,e);if(a.REGEXP_MODE===2)if(Interpreter.vm)d=a.vmCall("string.match(regexp)",
{string:h,regexp:d},d,e),d!==Interpreter.REGEXP_TIMEOUT&&e(d&&a.matchToPseudo_(d));else{var m=a.createWorker(),p=a.regExpTimeout(d,m,e);m.onmessage=function(y){clearTimeout(p);e(y.data&&a.matchToPseudo_(y.data))};m.postMessage(["match",h,d])}else d=h.match(d),e(d&&a.matchToPseudo_(d))};this.setAsyncFunctionPrototype(this.STRING,"match",c);c=function(d,e){var h=String(this);d=a.isa(d,a.REGEXP)?d.data:new RegExp(d);a.maybeThrowRegExp(d,e);if(a.REGEXP_MODE===2)if(Interpreter.vm)d=a.vmCall("string.search(regexp)",
{string:h,regexp:d},d,e),d!==Interpreter.REGEXP_TIMEOUT&&e(d);else{var m=a.createWorker(),p=a.regExpTimeout(d,m,e);m.onmessage=function(y){clearTimeout(p);e(y.data)};m.postMessage(["search",h,d])}else e(h.search(d))};this.setAsyncFunctionPrototype(this.STRING,"search",c);c=function(d,e,h){var m=String(this);e=String(e);if(a.isa(d,a.REGEXP)&&(d=d.data,a.maybeThrowRegExp(d,h),a.REGEXP_MODE===2)){if(Interpreter.vm)d=a.vmCall("string.replace(substr, newSubstr)",{string:m,substr:d,newSubstr:e},d,h),d!==
Interpreter.REGEXP_TIMEOUT&&h(d);else{var p=a.createWorker(),y=a.regExpTimeout(d,p,h);p.onmessage=function(x){clearTimeout(y);h(x.data)};p.postMessage(["replace",m,d,e])}return}h(m.replace(d,e))};this.setAsyncFunctionPrototype(this.STRING,"replace",c);this.polyfills_.push('(function(){var g=String.prototype.replace;String.prototype.replace=function(c,e){if(typeof e!=="function")return g.call(this,c,e);var b=this;if(c instanceof RegExp){for(var d=[],a=c.exec(b);a;){a.push(a.index,b);var f=e.apply(null,a);d.push([a.index,a[0].length,f]);a=c.global?c.exec(b):null}for(a=d.length-1;a>=0;a--)b=b.substring(0,d[a][0])+d[a][2]+b.substring(d[a][0]+d[a][1])}else a=b.indexOf(c),a!==-1&&(f=e(b.substr(a,c.length),a,b),b=b.substring(0,a)+f+b.substring(a+c.length));return b}})();')};
Interpreter.prototype.initBoolean=function(b){var a=this;this.BOOLEAN=this.createNativeFunction(function(c){c=Interpreter.nativeGlobal.Boolean(c);return a.calledWithNew()?(this.data=c,this):c},!0);this.setProperty(b,"Boolean",this.BOOLEAN,Interpreter.NONENUMERABLE_DESCRIPTOR)};
Interpreter.prototype.initNumber=function(b){var a=this;var c=function(d){d=arguments.length?Interpreter.nativeGlobal.Number(d):0;return a.calledWithNew()?(this.data=d,this):d};this.NUMBER=this.createNativeFunction(c,!0);this.setProperty(b,"Number",this.NUMBER,Interpreter.NONENUMERABLE_DESCRIPTOR);b=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"];for(c=0;c<b.length;c++)this.setProperty(this.NUMBER,b[c],Number[b[c]],Interpreter.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);
c=function(d){try{return Number(this).toExponential(d)}catch(e){a.throwException(a.ERROR,e.message)}};this.setNativeFunctionPrototype(this.NUMBER,"toExponential",c);c=function(d){try{return Number(this).toFixed(d)}catch(e){a.throwException(a.ERROR,e.message)}};this.setNativeFunctionPrototype(this.NUMBER,"toFixed",c);c=function(d){try{return Number(this).toPrecision(d)}catch(e){a.throwException(a.ERROR,e.message)}};this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",c);c=function(d){try{return Number(this).toString(d)}catch(e){a.throwException(a.ERROR,
e.message)}};this.setNativeFunctionPrototype(this.NUMBER,"toString",c);c=function(d,e){d=d?a.pseudoToNative(d):void 0;e=e?a.pseudoToNative(e):void 0;try{return Number(this).toLocaleString(d,e)}catch(h){a.throwException(a.ERROR,"toLocaleString: "+h.message)}};this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",c)};
Interpreter.prototype.initDate=function(b){var a=this;var c=function(e,h){if(!a.calledWithNew())return Interpreter.nativeGlobal.Date();var m=[null].concat(Array.from(arguments));this.data=new (Function.prototype.bind.apply(Interpreter.nativeGlobal.Date,m));return this};this.DATE=this.createNativeFunction(c,!0);this.DATE_PROTO=this.DATE.properties.prototype;this.setProperty(b,"Date",this.DATE,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,
!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);b="getDate getDay getFullYear getHours getMilliseconds getMinutes getMonth getSeconds getTime getTimezoneOffset getUTCDate getUTCDay getUTCFullYear getUTCHours getUTCMilliseconds getUTCMinutes getUTCMonth getUTCSeconds getYear setDate setFullYear setHours setMilliseconds setMinutes setMonth setSeconds setTime setUTCDate setUTCFullYear setUTCHours setUTCMilliseconds setUTCMinutes setUTCMonth setUTCSeconds setYear toDateString toJSON toGMTString toLocaleDateString toLocaleString toLocaleTimeString toTimeString toUTCString".split(" ");
for(var d=0;d<b.length;d++)c=function(e){return function(h){var m=this.data;m instanceof Date||a.throwException(a.TYPE_ERROR,e+" not called on a Date");for(var p=[],y=0;y<arguments.length;y++)p[y]=a.pseudoToNative(arguments[y]);return m[e].apply(m,p)}}(b[d]),this.setNativeFunctionPrototype(this.DATE,b[d],c);c=function(){try{return this.data.toISOString()}catch(e){a.throwException(a.RANGE_ERROR,"toISOString: "+e.message)}};this.setNativeFunctionPrototype(this.DATE,"toISOString",c)};
Interpreter.prototype.initRegExp=function(b){var a=this;var c=function(d,e){if(a.calledWithNew())var h=this;else{if(e===void 0&&a.isa(d,a.REGEXP))return d;h=a.createObjectProto(a.REGEXP_PROTO)}d=d===void 0?"":String(d);e=e?String(e):"";/^[gmi]*$/.test(e)||a.throwException(a.SYNTAX_ERROR,"Invalid regexp flag: "+e);try{var m=new Interpreter.nativeGlobal.RegExp(d,e)}catch(p){a.throwException(a.SYNTAX_ERROR,p.message)}a.populateRegExp(h,m);return h};this.REGEXP=this.createNativeFunction(c,!0);this.REGEXP_PROTO=
this.REGEXP.properties.prototype;this.setProperty(b,"RegExp",this.REGEXP,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.REGEXP.properties.prototype,"global",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(this.REGEXP.properties.prototype,
"source","(?:)",Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.polyfills_.push('Object.defineProperty(RegExp.prototype,"test",{configurable:!0,writable:!0,value:function(a){return!!this.exec(a)}});');c=function(d,e){var h=this.data;d=String(d);h.lastIndex=Number(a.getProperty(this,"lastIndex"));a.maybeThrowRegExp(h,e);if(a.REGEXP_MODE===2)if(Interpreter.vm)d=a.vmCall("regexp.exec(string)",{string:d,regexp:h},h,e),d!==Interpreter.REGEXP_TIMEOUT&&(a.setProperty(this,"lastIndex",h.lastIndex),e(a.matchToPseudo_(d)));
else{var m=a.createWorker(),p=a.regExpTimeout(h,m,e),y=this;m.onmessage=function(x){clearTimeout(p);a.setProperty(y,"lastIndex",x.data[1]);e(a.matchToPseudo_(x.data[0]))};m.postMessage(["exec",h,h.lastIndex,d])}else d=h.exec(d),a.setProperty(this,"lastIndex",h.lastIndex),e(a.matchToPseudo_(d))};this.setAsyncFunctionPrototype(this.REGEXP,"exec",c)};
Interpreter.prototype.matchToPseudo_=function(b){if(b){for(var a=Object.getOwnPropertyNames(b),c=0;c<a.length;c++){var d=a[c];isNaN(Number(d))&&d!=="length"&&d!=="input"&&d!=="index"&&delete b[d]}return this.nativeToPseudo(b)}return null};
Interpreter.prototype.initError=function(b){var a=this;this.ERROR=this.createNativeFunction(function(d){var e=a.calledWithNew()?this:a.createObject(a.ERROR);a.populateError(e,d);return e},!0);this.setProperty(b,"Error",this.ERROR,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.ERROR.properties.prototype,"message","",Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(this.ERROR.properties.prototype,"name","Error",Interpreter.NONENUMERABLE_DESCRIPTOR);var c=function(d){var e=a.createNativeFunction(function(h){var m=
a.calledWithNew()?this:a.createObject(e);a.populateError(m,h);return m},!0);a.setProperty(e,"prototype",a.createObject(a.ERROR),Interpreter.NONENUMERABLE_DESCRIPTOR);a.setProperty(e.properties.prototype,"name",d,Interpreter.NONENUMERABLE_DESCRIPTOR);a.setProperty(b,d,e,Interpreter.NONENUMERABLE_DESCRIPTOR);return e};this.EVAL_ERROR=c("EvalError");this.RANGE_ERROR=c("RangeError");this.REFERENCE_ERROR=c("ReferenceError");this.SYNTAX_ERROR=c("SyntaxError");this.TYPE_ERROR=c("TypeError");this.URI_ERROR=
c("URIError")};
Interpreter.prototype.initMath=function(b){var a=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(b,"Math",a,Interpreter.NONENUMERABLE_DESCRIPTOR);var c="E LN2 LN10 LOG2E LOG10E PI SQRT1_2 SQRT2".split(" ");for(b=0;b<c.length;b++)this.setProperty(a,c[b],Math[c[b]],Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);c="abs acos asin atan atan2 ceil cos exp floor log max min pow random round sin sqrt tan".split(" ");for(b=0;b<c.length;b++)this.setProperty(a,c[b],this.createNativeFunction(Math[c[b]],!1),
Interpreter.NONENUMERABLE_DESCRIPTOR)};
Interpreter.prototype.initJSON=function(b){var a=this,c=a.createObjectProto(this.OBJECT_PROTO);this.setProperty(b,"JSON",c,Interpreter.NONENUMERABLE_DESCRIPTOR);b=function(d){try{var e=JSON.parse(String(d))}catch(h){a.throwException(a.SYNTAX_ERROR,h.message)}return a.nativeToPseudo(e)};this.setProperty(c,"parse",this.createNativeFunction(b,!1));b=function(d,e,h){e&&e.class==="Function"?a.throwException(a.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):e&&e.class==="Array"?(e=a.pseudoToNative(e),
e=e.filter(function(p){return typeof p==="string"||typeof p==="number"})):e=null;typeof h!=="string"&&typeof h!=="number"&&(h=void 0);d=a.pseudoToNative(d);try{var m=JSON.stringify(d,e,h)}catch(p){a.throwException(a.TYPE_ERROR,p.message)}return m};this.setProperty(c,"stringify",this.createNativeFunction(b,!1))};Interpreter.prototype.isa=function(b,a){if(b===null||b===void 0||!a)return!1;a=a.properties.prototype;if(b===a)return!0;for(b=this.getPrototype(b);b;){if(b===a)return!0;b=b.proto}return!1};
Interpreter.prototype.populateRegExp=function(b,a){b.data=new RegExp(a.source,a.flags);this.setProperty(b,"lastIndex",a.lastIndex,Interpreter.NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"source",a.source,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"global",a.global,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"ignoreCase",a.ignoreCase,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);this.setProperty(b,"multiline",a.multiline,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR)};
Interpreter.prototype.populateError=function(b,a){a&&this.setProperty(b,"message",String(a),Interpreter.NONENUMERABLE_DESCRIPTOR);a=[];for(var c=this.stateStack.length-1;c>=0;c--){var d=this.stateStack[c],e=d.node;e.type==="CallExpression"&&(d=d.func_)&&a.length&&(a[a.length-1].datumName=this.getProperty(d,"name"));!e.loc||a.length&&e.type!=="CallExpression"||a.push({datumLoc:e.loc})}c=String(this.getProperty(b,"name"));e=String(this.getProperty(b,"message"));e=c+": "+e+"\n";for(c=0;c<a.length;c++){var h=
a[c].datumLoc;d=a[c].datumName;h=h.source+":"+h.start.line+":"+h.start.column;e=d?e+("  at "+d+" ("+h+")\n"):e+("  at "+h+"\n")}this.setProperty(b,"stack",e.trim(),Interpreter.NONENUMERABLE_DESCRIPTOR)};Interpreter.prototype.createWorker=function(){var b=this.createWorker.blob_;b||(b=new Blob([Interpreter.WORKER_CODE.join("\n")],{type:"application/javascript"}),this.createWorker.blob_=b);return new Worker(URL.createObjectURL(b))};
Interpreter.prototype.vmCall=function(b,a,c,d){var e={timeout:this.REGEXP_THREAD_TIMEOUT};try{return Interpreter.vm.runInNewContext(b,a,e)}catch(h){d(null),this.throwException(this.ERROR,"RegExp Timeout: "+c)}return Interpreter.REGEXP_TIMEOUT};
Interpreter.prototype.maybeThrowRegExp=function(b,a){if(this.REGEXP_MODE===0)var c=!1;else if(this.REGEXP_MODE===1)c=!0;else if(Interpreter.vm)c=!0;else if(typeof Worker==="function"&&typeof URL==="function")c=!0;else if(typeof require==="function"){try{Interpreter.vm=require("vm")}catch(d){}c=!!Interpreter.vm}else c=!1;c||(a(null),this.throwException(this.ERROR,"Regular expressions not supported: "+b))};
Interpreter.prototype.regExpTimeout=function(b,a,c){var d=this;return setTimeout(function(){a.terminate();c(null);try{d.throwException(d.ERROR,"RegExp Timeout: "+b)}catch(e){}},this.REGEXP_THREAD_TIMEOUT)};Interpreter.prototype.createObject=function(b){return this.createObjectProto(b&&b.properties.prototype)};Interpreter.prototype.createObjectProto=function(b){if(typeof b!=="object")throw Error("Non object prototype");b=new Interpreter.Object(b);this.isa(b,this.ERROR)&&(b.class="Error");return b};
Interpreter.prototype.createArray=function(){var b=this.createObjectProto(this.ARRAY_PROTO);this.setProperty(b,"length",0,{configurable:!1,enumerable:!1,writable:!0});b.class="Array";return b};
Interpreter.prototype.createFunctionBase_=function(b,a){var c=this.createObjectProto(this.FUNCTION_PROTO);a?(a=this.createObjectProto(this.OBJECT_PROTO),this.setProperty(c,"prototype",a,Interpreter.NONENUMERABLE_DESCRIPTOR),this.setProperty(a,"constructor",c,Interpreter.NONENUMERABLE_DESCRIPTOR)):c.illegalConstructor=!0;this.setProperty(c,"length",b,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);c.class="Function";return c};
Interpreter.prototype.createFunction=function(b,a,c){var d=this.createFunctionBase_(b.params.length,!0);d.parentScope=a;d.node=b;this.setProperty(d,"name",b.id?String(b.id.name):c||"",Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);return d};Interpreter.prototype.createNativeFunction=function(b,a){a=this.createFunctionBase_(b.length,a);a.nativeFunc=b;b.id=this.functionCounter_++;this.setProperty(a,"name",b.name,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);return a};
Interpreter.prototype.createAsyncFunction=function(b){var a=this.createFunctionBase_(b.length,!0);a.asyncFunc=b;b.id=this.functionCounter_++;this.setProperty(a,"name",b.name,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);return a};
Interpreter.prototype.nativeToPseudo=function(b,a){if(b===null||b===void 0||b===!0||b===!1||typeof b==="string"||typeof b==="number")return b;if(b instanceof Interpreter.Object)throw Error("Object is already pseudo");a=a||{pseudo:[],native:[]};var c=a.native.indexOf(b);if(c!==-1)return a.pseudo[c];a.native.push(b);if(b instanceof RegExp){var d=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(d,b);a.pseudo.push(d);return d}if(b instanceof Date)return d=this.createObjectProto(this.DATE_PROTO),
d.data=new Date(b.valueOf()),a.pseudo.push(d),d;var e;b instanceof Number?e=this.createObject(this.NUMBER):b instanceof String?e=this.createObject(this.STRING):b instanceof Boolean&&(e=this.createObject(this.BOOLEAN));if(e)return e.data=b.valueOf(),a.pseudo.push(e),e;if(typeof b==="function"){var h=this;d=Object.getOwnPropertyDescriptor(b,"prototype");d=this.createNativeFunction(function(){var m=Array.prototype.slice.call(arguments).map(function(p){return h.pseudoToNative(p)});m=b.apply(h,m);return h.nativeToPseudo(m)},
!!d);a.pseudo.push(d);return d}e=Array.isArray(b)?this.createArray():this.createObjectProto(this.OBJECT_PROTO);a.pseudo.push(e);for(d in b)this.setProperty(e,d,this.nativeToPseudo(b[d],a));return e};
Interpreter.prototype.pseudoToNative=function(b,a){if(b===null||b===void 0||b===!0||b===!1||typeof b==="string"||typeof b==="number")return b;if(!(b instanceof Interpreter.Object))throw Error("Object is not pseudo");a=a||{pseudo:[],native:[]};var c=a.pseudo.indexOf(b);if(c!==-1)return a.native[c];a.pseudo.push(b);if(this.isa(b,this.REGEXP)){var d=new RegExp(b.data.source,b.data.flags);d.lastIndex=b.data.lastIndex;a.native.push(d);return d}if(this.isa(b,this.DATE))return b=new Date(b.data.valueOf()),
a.native.push(b),b;if(this.isa(b,this.NUMBER)||this.isa(b,this.STRING)||this.isa(b,this.BOOLEAN))return b=Object(b.data),a.native.push(b),b;c=this.isa(b,this.ARRAY)?[]:{};a.native.push(c);for(d in b.properties){var e=this.pseudoToNative(b.properties[d],a);Object.defineProperty(c,d,{value:e,writable:!0,enumerable:!0,configurable:!0})}return c};
Interpreter.prototype.getPrototype=function(b){switch(typeof b){case "number":return this.NUMBER.properties.prototype;case "boolean":return this.BOOLEAN.properties.prototype;case "string":return this.STRING.properties.prototype}return b?b.proto:null};
Interpreter.prototype.getProperty=function(b,a){if(this.getterStep_)throw Error("Getter not supported in that context");a=String(a);b!==void 0&&b!==null||this.throwException(this.TYPE_ERROR,"Cannot read property '"+a+"' of "+b);if(typeof b==="object"&&!(b instanceof Interpreter.Object))throw TypeError("Expecting native value or pseudo object");if(a==="length"){if(this.isa(b,this.STRING))return String(b).length}else if(a.charCodeAt(0)<64&&this.isa(b,this.STRING)){var c=Interpreter.legalArrayIndex(a);
if(!isNaN(c)&&c<String(b).length)return String(b)[c]}do if(b.properties&&a in b.properties)return(c=b.getter[a])?(this.getterStep_=!0,c):b.properties[a];while(b=this.getPrototype(b))};
Interpreter.prototype.hasProperty=function(b,a){if(!(b instanceof Interpreter.Object))throw TypeError("Primitive data type has no properties");a=String(a);if(a==="length"&&this.isa(b,this.STRING))return!0;if(this.isa(b,this.STRING)){var c=Interpreter.legalArrayIndex(a);if(!isNaN(c)&&c<String(b).length)return!0}do if(b.properties&&a in b.properties)return!0;while(b=this.getPrototype(b));return!1};
Interpreter.prototype.setProperty=function(b,a,c,d){if(this.setterStep_)throw Error("Setter not supported in that context");a=String(a);b!==void 0&&b!==null||this.throwException(this.TYPE_ERROR,"Cannot set property '"+a+"' of "+b);if(typeof b==="object"&&!(b instanceof Interpreter.Object))throw TypeError("Expecting native value or pseudo object");d&&("get"in d||"set"in d)&&("value"in d||"writable"in d)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");
var e=!this.stateStack||this.getScope().strict;if(b instanceof Interpreter.Object){if(this.isa(b,this.STRING)){var h=Interpreter.legalArrayIndex(a);if(a==="length"||!isNaN(h)&&h<String(b).length){e&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+a+"' of String '"+b.data+"'");return}}if(b.class==="Array")if(h=b.properties.length,a==="length"){if(d){if(!("value"in d))return;c=d.value}c=Interpreter.legalArrayLength(c);isNaN(c)&&this.throwException(this.RANGE_ERROR,"Invalid array length");
if(c<h)for(m in b.properties){var m=Interpreter.legalArrayIndex(m);!isNaN(m)&&c<=m&&delete b.properties[m]}}else isNaN(m=Interpreter.legalArrayIndex(a))||(b.properties.length=Math.max(h,m+1));if(!b.preventExtensions||a in b.properties)if(d){e={};"get"in d&&d.get&&(b.getter[a]=d.get,e.get=this.setProperty.placeholderGet_);"set"in d&&d.set&&(b.setter[a]=d.set,e.set=this.setProperty.placeholderSet_);"configurable"in d&&(e.configurable=d.configurable);"enumerable"in d&&(e.enumerable=d.enumerable);"writable"in
d&&(e.writable=d.writable,delete b.getter[a],delete b.setter[a]);"value"in d?(e.value=d.value,delete b.getter[a],delete b.setter[a]):c!==Interpreter.VALUE_IN_DESCRIPTOR&&(e.value=c,delete b.getter[a],delete b.setter[a]);try{Object.defineProperty(b.properties,a,e)}catch(p){this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+a)}"get"in d&&!d.get&&delete b.getter[a];"set"in d&&!d.set&&delete b.setter[a]}else{if(c===Interpreter.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");
for(d=b;!(a in d.properties);)if(d=this.getPrototype(d),!d){d=b;break}if(d.setter&&d.setter[a])return this.setterStep_=!0,d.setter[a];if(d.getter&&d.getter[a])e&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+a+"' of object '"+b+"' which only has a getter");else try{b.properties[a]=c}catch(p){e&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+a+"' of object '"+b+"'")}}else e&&this.throwException(this.TYPE_ERROR,"Can't add property '"+a+"', object is not extensible")}else e&&
this.throwException(this.TYPE_ERROR,"Can't create property '"+a+"' on '"+b+"'")};Interpreter.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter");};Interpreter.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter");};Interpreter.prototype.setNativeFunctionPrototype=function(b,a,c){this.setProperty(b.properties.prototype,a,this.createNativeFunction(c,!1),Interpreter.NONENUMERABLE_DESCRIPTOR)};
Interpreter.prototype.setAsyncFunctionPrototype=function(b,a,c){this.setProperty(b.properties.prototype,a,this.createAsyncFunction(c),Interpreter.NONENUMERABLE_DESCRIPTOR)};Interpreter.prototype.getScope=function(){var b=this.stateStack[this.stateStack.length-1].scope;if(!b)throw Error("No scope found");return b};
Interpreter.prototype.createScope=function(b,a){var c=!1;if(a&&a.strict)c=!0;else{var d=b.body&&b.body[0];d&&d.expression&&d.expression.type==="Literal"&&d.expression.value==="use strict"&&(c=!0)}d=this.createObjectProto(null);c=new Interpreter.Scope(a,c,d);a||this.initGlobal(c.object);this.populateScope_(b,c);return c};Interpreter.prototype.createSpecialScope=function(b,a){if(!b)throw Error("parentScope required");a=a||this.createObjectProto(null);return new Interpreter.Scope(b,b.strict,a)};
Interpreter.prototype.getValueFromScope=function(b){for(var a=this.getScope();a&&a!==this.globalScope;){if(b in a.object.properties)return a.object.properties[b];a=a.parentScope}if(a===this.globalScope&&this.hasProperty(a.object,b))return this.getProperty(a.object,b);a=this.stateStack[this.stateStack.length-1].node;a.type==="UnaryExpression"&&a.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,b+" is not defined")};
Interpreter.prototype.setValueToScope=function(b,a){for(var c=this.getScope(),d=c.strict;c&&c!==this.globalScope;){if(b in c.object.properties){try{c.object.properties[b]=a}catch(e){d&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+b+"'")}return}c=c.parentScope}if(c===this.globalScope&&(!d||this.hasProperty(c.object,b)))return this.setProperty(c.object,b,a);this.throwException(this.REFERENCE_ERROR,b+" is not defined")};
Interpreter.prototype.populateScope_=function(b,a){if(b.variableCache_)var c=b.variableCache_;else{c=Object.create(null);switch(b.type){case "VariableDeclaration":for(var d=0;d<b.declarations.length;d++)c[b.declarations[d].id.name]=!0;break;case "FunctionDeclaration":c[b.id.name]=b;break;case "BlockStatement":case "CatchClause":case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "Program":case "SwitchCase":case "SwitchStatement":case "TryStatement":case "WithStatement":case "WhileStatement":var e=
b.constructor,h;for(h in b)if(b[h]!==b.loc){var m=b[h];if(m&&typeof m==="object")if(Array.isArray(m))for(d=0;d<m.length;d++){if(m[d]&&m[d].constructor===e){var p=this.populateScope_(m[d],a);for(h in p)c[h]=p[h]}}else if(m.constructor===e)for(h in p=this.populateScope_(m,a),p)c[h]=p[h]}}b.variableCache_=c}for(h in c)c[h]===!0?this.setProperty(a.object,h,void 0,Interpreter.VARIABLE_DESCRIPTOR):this.setProperty(a.object,h,this.createFunction(c[h],a),Interpreter.VARIABLE_DESCRIPTOR);return c};
Interpreter.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor};Interpreter.prototype.getValue=function(b){return b[0]===Interpreter.SCOPE_REFERENCE?this.getValueFromScope(b[1]):this.getProperty(b[0],b[1])};Interpreter.prototype.setValue=function(b,a){return b[0]===Interpreter.SCOPE_REFERENCE?this.setValueToScope(b[1],a):this.setProperty(b[0],b[1],a)};
Interpreter.prototype.throwException=function(b,a){if(!this.globalScope)throw a===void 0?b:a;a!==void 0&&b instanceof Interpreter.Object&&(b=this.createObject(b),this.populateError(b,a));this.unwind(Interpreter.Completion.THROW,b,void 0);throw Interpreter.STEP_ERROR;};
Interpreter.prototype.unwind=function(b,a,c){if(b===Interpreter.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");var d=this.stateStack;a:for(;d.length>0;d.pop()){var e=d[d.length-1];switch(e.node.type){case "TryStatement":e.cv={type:b,value:a,label:c};return;case "CallExpression":case "NewExpression":if(b===Interpreter.Completion.RETURN){e.value=a;return}if(b===Interpreter.Completion.BREAK||b===Interpreter.Completion.CONTINUE)throw Error("Unsyntactic break/continue not rejected by Acorn");
break;case "Program":if(b===Interpreter.Completion.RETURN)return;e.done=!0;break a}if(b===Interpreter.Completion.BREAK){if(c?e.labels&&e.labels.indexOf(c)!==-1:e.isLoop||e.isSwitch){d.pop();return}}else if(b===Interpreter.Completion.CONTINUE&&(c?e.labels&&e.labels.indexOf(c)!==-1:e.isLoop))return}this.isa(a,this.ERROR)?(b={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},c=String(this.getProperty(a,"name")),d=this.getProperty(a,
"message").valueOf(),b=(b[c]||Error)(d),b.stack=String(this.getProperty(a,"stack"))):b=String(a);this.value=b;throw b;};
Interpreter.prototype.nodeSummary=function(b){switch(b.type){case "ArrayExpression":return"[...]";case "BinaryExpression":case "LogicalExpression":return this.nodeSummary(b.left)+" "+b.operator+" "+this.nodeSummary(b.right);case "CallExpression":return this.nodeSummary(b.callee)+"(...)";case "ConditionalExpression":return this.nodeSummary(b.test)+" ? "+this.nodeSummary(b.consequent)+" : "+this.nodeSummary(b.alternate);case "Identifier":return b.name;case "Literal":return b.raw;case "MemberExpression":var a=
this.nodeSummary(b.object),c=this.nodeSummary(b.property);return b.computed?a+"["+c+"]":a+"."+c;case "NewExpression":return"new "+this.nodeSummary(b.callee)+"(...)";case "ObjectExpression":return"{...}";case "ThisExpression":return"this";case "UnaryExpression":return b.operator+" "+this.nodeSummary(b.argument);case "UpdateExpression":return a=this.nodeSummary(b.argument),b.prefix?b.operator+a:a+b.operator}return"???"};
Interpreter.prototype.createTask_=function(b,a){var c=this.stateStack[this.stateStack.length-1],d=Array.from(a),e=d.shift();a=Math.max(Number(d.shift()||0),0);var h=this.newNode();if(e instanceof Interpreter.Object&&e.class==="Function"){var m=e;h.type="CallExpression";c=c.scope}else{try{var p=this.parse_(String(e),"taskCode"+this.taskCodeNumber_++)}catch(y){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+y.message)}h.type="EvalProgram_";h.body=p.body;c=c.node.arguments[0];Interpreter.stripLocations_(h,
c?c.start:void 0,c?c.end:void 0);c=this.globalScope;d.length=0}b=new Interpreter.Task(m,d,c,h,b?a:-1);this.scheduleTask_(b,a);return b.pid};Interpreter.prototype.scheduleTask_=function(b,a){b.time=Date.now()+a;this.tasks.push(b);this.tasks.sort(function(c,d){return c.time-d.time})};Interpreter.prototype.deleteTask_=function(b){for(var a=0;a<this.tasks.length;a++)if(this.tasks[a].pid==b){this.tasks.splice(a,1);break}};
Interpreter.prototype.nextTask_=function(){var b=this.tasks[0];if(!b||b.time>Date.now())return null;this.tasks.shift();b.interval>=0&&this.scheduleTask_(b,b.interval);var a=new Interpreter.State(b.node,b.scope);b.functionRef&&(a.doneCallee_=2,a.funcThis_=this.globalObject,a.func_=b.functionRef,a.doneArgs_=!0,a.arguments_=b.argsArray);return a};
Interpreter.prototype.createGetter_=function(b,a){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;a=Array.isArray(a)?a[0]:a;var c=this.newNode();c.type="CallExpression";c=new Interpreter.State(c,this.stateStack[this.stateStack.length-1].scope);c.doneCallee_=2;c.funcThis_=a;c.func_=b;c.doneArgs_=!0;c.arguments_=[];return c};
Interpreter.prototype.createSetter_=function(b,a,c){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;a=Array.isArray(a)?a[0]:this.globalObject;var d=this.newNode();d.type="CallExpression";d=new Interpreter.State(d,this.stateStack[this.stateStack.length-1].scope);d.doneCallee_=2;d.funcThis_=a;d.func_=b;d.doneArgs_=!0;d.arguments_=[c];return d};
Interpreter.prototype.boxThis_=function(b){if(b===void 0||b===null)return this.globalObject;if(!(b instanceof Interpreter.Object)){var a=this.createObjectProto(this.getPrototype(b));a.data=b;return a}return b};Interpreter.prototype.getGlobalScope=function(){return this.globalScope};Interpreter.prototype.setGlobalScope=function(b){this.globalScope=b;this.stateStack[0].scope=b};Interpreter.prototype.getStateStack=function(){return this.stateStack};
Interpreter.prototype.setStateStack=function(b){this.stateStack=b};Interpreter.State=function(b,a){this.node=b;this.scope=a};Interpreter.Scope=function(b,a,c){this.parentScope=b;this.strict=a;this.object=c};Interpreter.Object=function(b){this.getter=Object.create(null);this.setter=Object.create(null);this.properties=Object.create(null);this.proto=b};Interpreter.Object.prototype.proto=null;Interpreter.Object.prototype.class="Object";Interpreter.Object.prototype.data=null;
Interpreter.Object.prototype.toString=function(){if(!Interpreter.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof Interpreter.Object))return String(this);if(this.class==="Array"){var b=Interpreter.toStringCycles_;b.push(this);try{var a=[],c=this.properties.length,d=!1;c>1024&&(c=1E3,d=!0);for(var e=0;e<c;e++){var h=this.properties[e];a[e]=h instanceof Interpreter.Object&&b.indexOf(h)!==-1?"...":h}d&&a.push("...")}finally{b.pop()}return a.join(",")}if(this.class==="Error"){b=
Interpreter.toStringCycles_;if(b.indexOf(this)!==-1)return"[object Error]";c=this;do if("name"in c.properties){a=c.properties.name;break}while(c=c.proto);c=this;do if("message"in c.properties){d=c.properties.message;break}while(c=c.proto);b.push(this);try{a=a&&String(a),d=d&&String(d)}finally{b.pop()}return d?a+": "+d:String(a)}return this.data!==null?String(this.data):"[object "+this.class+"]"};
Interpreter.Object.prototype.valueOf=function(){return!Interpreter.currentInterpreter_||this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data};Interpreter.Task=function(b,a,c,d,e){this.functionRef=b;this.argsArray=a;this.scope=c;this.node=d;this.interval=e;this.pid=++Interpreter.Task.pid;this.time=0};Interpreter.Task.pid=0;
Interpreter.prototype.stepArrayExpression=function(b,a,c){c=c.elements;var d=a.n_||0;a.array_?(this.setProperty(a.array_,d,a.value),d++):(a.array_=this.createArray(),a.array_.properties.length=c.length);for(;d<c.length;){if(c[d])return a.n_=d,new Interpreter.State(c[d],a.scope);d++}b.pop();b[b.length-1].value=a.array_};
Interpreter.prototype.stepAssignmentExpression=function(b,a,c){if(!a.doneLeft_)return a.doneLeft_=!0,a=new Interpreter.State(c.left,a.scope),a.components=!0,a;if(!a.doneRight_){a.leftReference_||(a.leftReference_=a.value);a.doneGetter_&&(a.leftValue_=a.value);if(!a.doneGetter_&&c.operator!=="="&&(b=this.getValue(a.leftReference_),a.leftValue_=b,this.getterStep_))return a.doneGetter_=!0,this.createGetter_(b,a.leftReference_);a.doneRight_=!0;c.operator==="="&&c.left.type==="Identifier"&&(a.destinationName=
c.left.name);return new Interpreter.State(c.right,a.scope)}if(a.doneSetter_)b.pop(),b[b.length-1].value=a.setterValue_;else{var d=a.leftValue_,e=a.value;switch(c.operator){case "=":d=e;break;case "+=":d+=e;break;case "-=":d-=e;break;case "*=":d*=e;break;case "/=":d/=e;break;case "%=":d%=e;break;case "<<=":d<<=e;break;case ">>=":d>>=e;break;case ">>>=":d>>>=e;break;case "&=":d&=e;break;case "^=":d^=e;break;case "|=":d|=e;break;default:throw SyntaxError("Unknown assignment expression: "+c.operator);
}if(c=this.setValue(a.leftReference_,d))return a.doneSetter_=!0,a.setterValue_=d,this.createSetter_(c,a.leftReference_,d);b.pop();b[b.length-1].value=d}};
Interpreter.prototype.stepBinaryExpression=function(b,a,c){if(!a.doneLeft_)return a.doneLeft_=!0,new Interpreter.State(c.left,a.scope);if(!a.doneRight_)return a.doneRight_=!0,a.leftValue_=a.value,new Interpreter.State(c.right,a.scope);b.pop();var d=a.leftValue_;a=a.value;switch(c.operator){case "==":c=d==a;break;case "!=":c=d!=a;break;case "===":c=d===a;break;case "!==":c=d!==a;break;case ">":c=d>a;break;case ">=":c=d>=a;break;case "<":c=d<a;break;case "<=":c=d<=a;break;case "+":c=d+a;break;case "-":c=
d-a;break;case "*":c=d*a;break;case "/":c=d/a;break;case "%":c=d%a;break;case "&":c=d&a;break;case "|":c=d|a;break;case "^":c=d^a;break;case "<<":c=d<<a;break;case ">>":c=d>>a;break;case ">>>":c=d>>>a;break;case "in":a instanceof Interpreter.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+a+"'");c=this.hasProperty(a,d);break;case "instanceof":this.isa(a,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+a+"'");c=d instanceof Interpreter.Object?
this.isa(d,a):!1;break;default:throw SyntaxError("Unknown binary operator: "+c.operator);}b[b.length-1].value=c};Interpreter.prototype.stepBlockStatement=function(b,a,c){var d=a.n_||0;if(c=c.body[d])return a.n_=d+1,new Interpreter.State(c,a.scope);b.pop()};Interpreter.prototype.stepBreakStatement=function(b,a,c){this.unwind(Interpreter.Completion.BREAK,void 0,c.label&&c.label.name)};Interpreter.prototype.evalCodeNumber_=0;
Interpreter.prototype.stepCallExpression=function(b,a,c){if(!a.doneCallee_){a.doneCallee_=1;var d=new Interpreter.State(c.callee,a.scope);d.components=!0;return d}if(a.doneCallee_===1){a.doneCallee_=2;var e=a.value;if(Array.isArray(e)){if(a.func_=this.getValue(e),e[0]===Interpreter.SCOPE_REFERENCE?a.directEval_=e[1]==="eval":a.funcThis_=e[0],e=a.func_,this.getterStep_)return a.doneCallee_=1,this.createGetter_(e,a.value)}else a.func_=e;a.arguments_=[];a.n_=0}e=a.func_;if(!a.doneArgs_){a.n_!==0&&a.arguments_.push(a.value);
if(c.arguments[a.n_])return new Interpreter.State(c.arguments[a.n_++],a.scope);if(c.type==="NewExpression"){e instanceof Interpreter.Object&&!e.illegalConstructor||this.throwException(this.TYPE_ERROR,this.nodeSummary(c.callee)+" is not a constructor");if(e===this.ARRAY)a.funcThis_=this.createArray();else{var h=e.properties.prototype;if(typeof h!=="object"||h===null)h=this.OBJECT_PROTO;a.funcThis_=this.createObjectProto(h)}a.isConstructor=!0}a.doneArgs_=!0}if(a.doneExec_)b.pop(),b[b.length-1].value=
a.isConstructor&&typeof a.value!=="object"?a.funcThis_:a.value;else{a.doneExec_=!0;e instanceof Interpreter.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(c.callee)+" is not a function");if(b=e.node){c=this.createScope(b.body,e.parentScope);d=this.createArray();for(e=0;e<a.arguments_.length;e++)this.setProperty(d,e,a.arguments_[e]);this.setProperty(c.object,"arguments",d);for(e=0;e<b.params.length;e++)this.setProperty(c.object,b.params[e].name,a.arguments_.length>e?a.arguments_[e]:void 0);
c.strict||(a.funcThis_=this.boxThis_(a.funcThis_));this.setProperty(c.object,"this",a.funcThis_,Interpreter.READONLY_DESCRIPTOR);a.value=void 0;return new Interpreter.State(b.body,c)}if(e.eval)if(e=a.arguments_[0],typeof e!=="string")a.value=e;else{try{d=this.parse_(String(e),"eval"+this.evalCodeNumber_++)}catch(p){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+p.message)}e=this.newNode();e.type="EvalProgram_";e.body=d.body;Interpreter.stripLocations_(e,c.start,c.end);c=a.directEval_?a.scope:
this.globalScope;c.strict?c=this.createScope(d,c):this.populateScope_(d,c);this.value=void 0;return new Interpreter.State(e,c)}else if(e.nativeFunc)a.scope.strict||(a.funcThis_=this.boxThis_(a.funcThis_)),a.value=e.nativeFunc.apply(a.funcThis_,a.arguments_);else if(e.asyncFunc){var m=this;d=e.asyncFunc.length-1;d=a.arguments_.concat(Array(d)).slice(0,d);d.push(function(p){a.value=p;m.paused_=!1});this.paused_=!0;a.scope.strict||(a.funcThis_=this.boxThis_(a.funcThis_));e.asyncFunc.apply(a.funcThis_,
d)}else this.throwException(this.TYPE_ERROR,this.nodeSummary(c.callee)+" is not callable")}};Interpreter.prototype.stepConditionalExpression=function(b,a,c){var d=a.mode_||0;if(d===0)return a.mode_=1,new Interpreter.State(c.test,a.scope);if(d===1){a.mode_=2;if((d=!!a.value)&&c.consequent)return new Interpreter.State(c.consequent,a.scope);if(!d&&c.alternate)return new Interpreter.State(c.alternate,a.scope);this.value=void 0}b.pop();c.type==="ConditionalExpression"&&(b[b.length-1].value=a.value)};
Interpreter.prototype.stepContinueStatement=function(b,a,c){this.unwind(Interpreter.Completion.CONTINUE,void 0,c.label&&c.label.name)};Interpreter.prototype.stepDebuggerStatement=function(b,a,c){b.pop()};Interpreter.prototype.stepDoWhileStatement=function(b,a,c){c.type==="DoWhileStatement"&&a.test_===void 0&&(a.value=!0,a.test_=!0);if(!a.test_)return a.test_=!0,new Interpreter.State(c.test,a.scope);if(!a.value)b.pop();else if(c.body)return a.test_=!1,a.isLoop=!0,new Interpreter.State(c.body,a.scope)};
Interpreter.prototype.stepEmptyStatement=function(b,a,c){b.pop()};Interpreter.prototype.stepEvalProgram_=function(b,a,c){var d=a.n_||0;if(c=c.body[d])return a.n_=d+1,new Interpreter.State(c,a.scope);b.pop();b[b.length-1].value=this.value};Interpreter.prototype.stepExpressionStatement=function(b,a,c){if(!a.done_)return this.value=void 0,a.done_=!0,new Interpreter.State(c.expression,a.scope);b.pop();this.value=a.value};
Interpreter.prototype.stepForInStatement=function(b,a,c){if(!a.doneInit_&&(a.doneInit_=!0,c.left.declarations&&c.left.declarations[0].init))return a.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new Interpreter.State(c.left,a.scope);if(!a.doneObject_)return a.doneObject_=!0,a.variable_||(a.variable_=a.value),new Interpreter.State(c.right,a.scope);a.isLoop||(a.isLoop=!0,a.object_=a.value,a.visited_=Object.create(null));if(a.name_===
void 0)a:for(;;){if(a.object_ instanceof Interpreter.Object)for(a.props_||(a.props_=Object.getOwnPropertyNames(a.object_.properties));;){var d=a.props_.shift();if(d===void 0)break;if(Object.prototype.hasOwnProperty.call(a.object_.properties,d)&&!a.visited_[d]&&(a.visited_[d]=!0,Object.prototype.propertyIsEnumerable.call(a.object_.properties,d))){a.name_=d;break a}}else if(a.object_!==null&&a.object_!==void 0)for(a.props_||(a.props_=Object.getOwnPropertyNames(a.object_));;){d=a.props_.shift();if(d===
void 0)break;a.visited_[d]=!0;if(Object.prototype.propertyIsEnumerable.call(a.object_,d)){a.name_=d;break a}}a.object_=this.getPrototype(a.object_);a.props_=null;if(a.object_===null){b.pop();return}}if(!a.doneVariable_)if(a.doneVariable_=!0,b=c.left,b.type==="VariableDeclaration")a.variable_=[Interpreter.SCOPE_REFERENCE,b.declarations[0].id.name];else return a.variable_=null,a=new Interpreter.State(b,a.scope),a.components=!0,a;a.variable_||(a.variable_=a.value);if(!a.doneSetter_&&(a.doneSetter_=!0,
b=a.name_,d=this.setValue(a.variable_,b)))return this.createSetter_(d,a.variable_,b);a.name_=void 0;a.doneVariable_=!1;a.doneSetter_=!1;if(c.body)return new Interpreter.State(c.body,a.scope)};
Interpreter.prototype.stepForStatement=function(b,a,c){switch(a.mode_){default:a.mode_=1;if(c.init)return new Interpreter.State(c.init,a.scope);break;case 1:a.mode_=2;if(c.test)return new Interpreter.State(c.test,a.scope);break;case 2:a.mode_=3;if(c.test&&!a.value)b.pop();else return a.isLoop=!0,new Interpreter.State(c.body,a.scope);break;case 3:if(a.mode_=1,c.update)return new Interpreter.State(c.update,a.scope)}};Interpreter.prototype.stepFunctionDeclaration=function(b,a,c){b.pop()};
Interpreter.prototype.stepFunctionExpression=function(b,a,c){b.pop();a=b[b.length-1];b=a.scope;c.id&&(b=this.createSpecialScope(b));a.value=this.createFunction(c,b,a.destinationName);c.id&&this.setProperty(b.object,c.id.name,a.value,Interpreter.READONLY_DESCRIPTOR)};
Interpreter.prototype.stepIdentifier=function(b,a,c){b.pop();if(a.components)b[b.length-1].value=[Interpreter.SCOPE_REFERENCE,c.name];else{a=this.getValueFromScope(c.name);if(this.getterStep_)return this.createGetter_(a,this.globalObject);b[b.length-1].value=a}};Interpreter.prototype.stepIfStatement=Interpreter.prototype.stepConditionalExpression;
Interpreter.prototype.stepLabeledStatement=function(b,a,c){b.pop();b=a.labels||[];b.push(c.label.name);a=new Interpreter.State(c.body,a.scope);a.labels=b;return a};Interpreter.prototype.stepLiteral=function(b,a,c){b.pop();a=c.value;a instanceof RegExp&&(c=this.createObjectProto(this.REGEXP_PROTO),this.populateRegExp(c,a),a=c);b[b.length-1].value=a};
Interpreter.prototype.stepLogicalExpression=function(b,a,c){if(c.operator!=="&&"&&c.operator!=="||")throw SyntaxError("Unknown logical operator: "+c.operator);if(!a.doneLeft_)return a.doneLeft_=!0,new Interpreter.State(c.left,a.scope);if(a.doneRight_)b.pop(),b[b.length-1].value=a.value;else if(c.operator==="&&"&&!a.value||c.operator==="||"&&a.value)b.pop(),b[b.length-1].value=a.value;else return a.doneRight_=!0,new Interpreter.State(c.right,a.scope)};
Interpreter.prototype.stepMemberExpression=function(b,a,c){if(!a.doneObject_)return a.doneObject_=!0,new Interpreter.State(c.object,a.scope);if(c.computed)if(a.doneProperty_)c=a.value;else return a.object_=a.value,a.doneProperty_=!0,new Interpreter.State(c.property,a.scope);else a.object_=a.value,c=c.property.name;b.pop();if(a.components)b[b.length-1].value=[a.object_,c];else{c=this.getProperty(a.object_,c);if(this.getterStep_)return this.createGetter_(c,a.object_);b[b.length-1].value=c}};
Interpreter.prototype.stepNewExpression=Interpreter.prototype.stepCallExpression;
Interpreter.prototype.stepObjectExpression=function(b,a,c){var d=a.n_||0,e=c.properties[d];if(a.object_){var h=a.destinationName;a.properties_[h]||(a.properties_[h]={});a.properties_[h][e.kind]=a.value;a.n_=++d;e=c.properties[d]}else a.object_=this.createObjectProto(this.OBJECT_PROTO),a.properties_=Object.create(null);if(e){var m=e.key;if(m.type==="Identifier")h=m.name;else if(m.type==="Literal")h=m.value;else throw SyntaxError("Unknown object structure: "+m.type);a.destinationName=h;return new Interpreter.State(e.value,
a.scope)}for(m in a.properties_)c=a.properties_[m],"get"in c||"set"in c?this.setProperty(a.object_,m,Interpreter.VALUE_IN_DESCRIPTOR,{configurable:!0,enumerable:!0,get:c.get,set:c.set}):this.setProperty(a.object_,m,c.init);b.pop();b[b.length-1].value=a.object_};Interpreter.prototype.stepProgram=function(b,a,c){if(b=c.body.shift())return a.done=!1,new Interpreter.State(b,a.scope);a.done=!0};
Interpreter.prototype.stepReturnStatement=function(b,a,c){if(c.argument&&!a.done_)return a.done_=!0,new Interpreter.State(c.argument,a.scope);this.unwind(Interpreter.Completion.RETURN,a.value,void 0)};Interpreter.prototype.stepSequenceExpression=function(b,a,c){var d=a.n_||0;if(c=c.expressions[d])return a.n_=d+1,new Interpreter.State(c,a.scope);b.pop();b[b.length-1].value=a.value};
Interpreter.prototype.stepSwitchStatement=function(b,a,c){if(!a.test_)return a.test_=1,new Interpreter.State(c.discriminant,a.scope);a.test_===1&&(a.test_=2,a.switchValue_=a.value,a.defaultCase_=-1);for(;;){var d=a.index_||0,e=c.cases[d];if(a.matched_||!e||e.test)if(e||a.matched_||a.defaultCase_===-1)if(e){if(!a.matched_&&!a.tested_&&e.test)return a.tested_=!0,new Interpreter.State(e.test,a.scope);if(a.matched_||a.value===a.switchValue_){a.matched_=!0;var h=a.n_||0;if(e.consequent[h])return a.isSwitch=
!0,a.n_=h+1,new Interpreter.State(e.consequent[h],a.scope)}a.tested_=!1;a.n_=0;a.index_=d+1}else{b.pop();break}else a.matched_=!0,a.index_=a.defaultCase_;else a.defaultCase_=d,a.index_=d+1}};Interpreter.prototype.stepThisExpression=function(b,a,c){b.pop();b[b.length-1].value=this.getValueFromScope("this")};Interpreter.prototype.stepThrowStatement=function(b,a,c){if(a.done_)this.throwException(a.value);else return a.done_=!0,new Interpreter.State(c.argument,a.scope)};
Interpreter.prototype.stepTryStatement=function(b,a,c){if(!a.doneBlock_)return a.doneBlock_=!0,new Interpreter.State(c.block,a.scope);if(a.cv&&a.cv.type===Interpreter.Completion.THROW&&!a.doneHandler_&&c.handler)return a.doneHandler_=!0,b=this.createSpecialScope(a.scope),this.setProperty(b.object,c.handler.param.name,a.cv.value),a.cv=void 0,new Interpreter.State(c.handler.body,b);if(!a.doneFinalizer_&&c.finalizer)return a.doneFinalizer_=!0,new Interpreter.State(c.finalizer,a.scope);b.pop();a.cv&&
this.unwind(a.cv.type,a.cv.value,a.cv.label)};
Interpreter.prototype.stepUnaryExpression=function(b,a,c){if(!a.done_)return a.done_=!0,b=new Interpreter.State(c.argument,a.scope),b.components=c.operator==="delete",b;b.pop();var d=a.value;switch(c.operator){case "-":d=-d;break;case "+":d=+d;break;case "!":d=!d;break;case "~":d=~d;break;case "delete":c=!0;if(Array.isArray(d)){var e=d[0];e===Interpreter.SCOPE_REFERENCE&&(e=a.scope);d=String(d[1]);try{delete e.properties[d]}catch(h){a.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+
d+"' of '"+e+"'"):c=!1}}d=c;break;case "typeof":d=d&&d.class==="Function"?"function":typeof d;break;case "void":d=void 0;break;default:throw SyntaxError("Unknown unary operator: "+c.operator);}b[b.length-1].value=d};
Interpreter.prototype.stepUpdateExpression=function(b,a,c){if(!a.doneLeft_)return a.doneLeft_=!0,b=new Interpreter.State(c.argument,a.scope),b.components=!0,b;a.leftSide_||(a.leftSide_=a.value);a.doneGetter_&&(a.leftValue_=a.value);if(!a.doneGetter_){var d=this.getValue(a.leftSide_);a.leftValue_=d;if(this.getterStep_)return a.doneGetter_=!0,this.createGetter_(d,a.leftSide_)}if(a.doneSetter_)b.pop(),b[b.length-1].value=a.setterValue_;else{d=Number(a.leftValue_);if(c.operator==="++")var e=d+1;else if(c.operator===
"--")e=d-1;else throw SyntaxError("Unknown update expression: "+c.operator);c=c.prefix?e:d;if(d=this.setValue(a.leftSide_,e))return a.doneSetter_=!0,a.setterValue_=c,this.createSetter_(d,a.leftSide_,e);b.pop();b[b.length-1].value=c}};
Interpreter.prototype.stepVariableDeclaration=function(b,a,c){c=c.declarations;var d=a.n_||0,e=c[d];a.init_&&e&&(this.setValueToScope(e.id.name,a.value),a.init_=!1,e=c[++d]);for(;e;){if(e.init)return a.n_=d,a.init_=!0,a.destinationName=e.id.name,new Interpreter.State(e.init,a.scope);e=c[++d]}b.pop()};
Interpreter.prototype.stepWithStatement=function(b,a,c){if(!a.doneObject_)return a.doneObject_=!0,new Interpreter.State(c.object,a.scope);b.pop();b=this.createSpecialScope(a.scope,a.value);return new Interpreter.State(c.body,b)};Interpreter.prototype.stepWhileStatement=Interpreter.prototype.stepDoWhileStatement;Interpreter.nativeGlobal.Interpreter=Interpreter;Interpreter.prototype.step=Interpreter.prototype.step;Interpreter.prototype.run=Interpreter.prototype.run;Interpreter.prototype.getStatus=Interpreter.prototype.getStatus;
Interpreter.prototype.appendCode=Interpreter.prototype.appendCode;Interpreter.prototype.createObject=Interpreter.prototype.createObject;Interpreter.prototype.createObjectProto=Interpreter.prototype.createObjectProto;Interpreter.prototype.createNativeFunction=Interpreter.prototype.createNativeFunction;Interpreter.prototype.createAsyncFunction=Interpreter.prototype.createAsyncFunction;Interpreter.prototype.getProperty=Interpreter.prototype.getProperty;Interpreter.prototype.setProperty=Interpreter.prototype.setProperty;
Interpreter.prototype.nativeToPseudo=Interpreter.prototype.nativeToPseudo;Interpreter.prototype.pseudoToNative=Interpreter.prototype.pseudoToNative;Interpreter.prototype.getGlobalScope=Interpreter.prototype.getGlobalScope;Interpreter.prototype.setGlobalScope=Interpreter.prototype.setGlobalScope;Interpreter.prototype.getStateStack=Interpreter.prototype.getStateStack;Interpreter.prototype.setStateStack=Interpreter.prototype.setStateStack;Interpreter.Status=Interpreter.Status;
Interpreter.VALUE_IN_DESCRIPTOR=Interpreter.VALUE_IN_DESCRIPTOR;
